"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[294],{9550:function(e,r,s){s(2791);var t=s(184);r.Z=function(e){var r=e.props;return(0,t.jsx)("div",{className:"max-w-lg mx-auto",children:(0,t.jsx)("div",{className:"bg-white shadow-md border border-blue-200 rounded-lg max-w-sm mb-5",children:(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsxs)("h5",{className:"text-gray-900 font-bold tracking-tight mb-2 text-sm",children:["Reviewer:"," ",(0,t.jsx)("span",{className:" text-lg text-blue-500",children:r.reviewer_name})]}),(0,t.jsx)("p",{className:"font-normal text-base text-gray-700 mb-3",children:r.content})]})})})}},4815:function(e,r,s){s.d(r,{c:function(){return t}});var t=["Gaillimh/Galway","Lios D\xfain Bhearna/Lisdoonvarna","Ballydehob","Baltimore","Corcaigh/Cork","City Centre","Cill Chainnigh/Kilkenny","Blackrock","Baile Mhic And\xe1in/Thomastown","Aird Mh\xf3r/Ardmore","Waternish","Dalry","Belfast","Peat Inn","Leith","Edinburgh","Anstruther","Grasmere","Bowness-on-Windermere","Cartmel","Newcastle upon Tyne","Menai Bridge/Porthaethwy","Langho","Pateley Bridge","Birkenhead","Fence","Llandrillo","Machynlleth","Oldstead","Chester","Harome","Leeds","Montgomery/Trefaldwyn","South Dalton","Baslow","Winteringham","Ilfracombe","Llanddewi Skirrid","Padstow","Birmingham","Port Isaac","Hampton in Arden","Mountsorrel","Whitebrook","Penarth","Portscatho","Kenilworth","Knowstone","Stratford-upon-Avon","Cheltenham","Chagford","Upper Hambleton","Bristol","Chew Magna","Malmesbury","Castle Combe","Colerne","Bath","Lympstone","Hunstanton","Torquay","Oxford","Murcott","Morston","East Chisenbury","Newbury","Marlow","Burchett's Green","Shinfield","Bray","Winchester","Bagshot","Ascot","Egham","Kew","Chiswick","Little Dunmow","Hammersmith","Kensington","Marylebone","Regent's Park","Fulham","Bloomsbury","Mayfair","Soho","Belgravia","Ripley","Westminster","Chelsea","Saint James's","Victoria","Clerkenwell","London","Shoreditch","Finsbury","Spitalfields","City of London","Bermondsey","Clapham Common","Wandsworth","Dorking","Horsham","Gravetye","Seasalter","Biddenden","Fordwich","Saint Helier/Saint-H\xe9lier","Auchterarder","Summerhouse","Aughton","Nottingham","Great Milton","Cambridge","North Kensington","Hyde Park"]},8128:function(e,r,s){s.d(r,{$:function(){return t}});var t=["Creative","Classic cuisine","Modern cuisine","Japanese","Modern British","Creative British","French","Seafood","Classic French","Spanish","Asian influences","Traditional British","Regional cuisine","Italian","Indian","Mediterranean cuisine","Chinese","Creative French","Scandinavian","Modern French"]},294:function(e,r,s){s.r(r),s.d(r,{default:function(){return M}});var t=s(4165),n=s(5861),a=s(9439),i=s(2791),o=s(7689),l=s(9434),c=s(9961),d=s(7626),u=s(8493),h=s(1413),m=s(1134),x=s(8128),f=s(4815),b=s(184),g=function(e){var r=(0,m.cI)({defaultValues:{stars:null,cuisine:null,city:null}}),s=r.register,t=r.handleSubmit,n=r.reset;return(0,b.jsxs)("div",{className:"grid  grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:grid-cols-1 sm:justify-center sm:items-center  ",children:[(0,b.jsx)("div",{className:" grid justify-items-end py-2 px-2",children:(0,b.jsx)("button",{onClick:function(){n()},className:"px-2 py-2 w-50% rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 text-sm",children:"Reset Filters"})}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("form",{onSubmit:t((function(r){console.log(r),function(r){var s=e.rests;r.stars&&(s=s.filter((function(e){return e.stars===r.stars}))),r.cuisine&&(s=s.filter((function(e){return e.cuisine===r.cuisine}))),r.city&&(s=s.filter((function(e){return e.city===r.city}))),e.setFilteredRests(s)}(r)})),className:"grid grid-cols-2 md:grid-cols-3  xl:grid-cols-4 gap-4 mt-4 ",children:[(0,b.jsxs)("select",(0,h.Z)((0,h.Z)({},s("stars")),{},{className:"px-4 py-2 w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 text-sm",children:[(0,b.jsx)("option",{value:"",children:"Stars"}),(0,b.jsx)("option",{value:"1",children:"1"}),(0,b.jsx)("option",{value:"2",children:"2"}),(0,b.jsx)("option",{value:"3",children:"3"})]})),(0,b.jsxs)("select",(0,h.Z)((0,h.Z)({},s("cuisine")),{},{className:"px-4 py-2 w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 text-sm",children:[(0,b.jsx)("option",{value:"",children:"Cuisine"}),x.$.map((function(e){return(0,b.jsx)("option",{value:e,children:e})}))]})),(0,b.jsxs)("select",(0,h.Z)((0,h.Z)({},s("city")),{},{className:"px-4 py-2 w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 text-sm",children:[(0,b.jsx)("option",{value:"",children:"City"}),f.c.map((function(e){return(0,b.jsx)("option",{value:e,children:e})}))]})),(0,b.jsx)("button",{type:"submit",className:"text-gray-700 hover:bg-slate-200 font-bold py-2 px-4 rounded",children:"Filter"})]}),(0,b.jsx)("button",{className:"text-gray-700 hover:bg-slate-200 font-bold py-1 px-6 rounded",onClick:function(){n(),e.setFilteredRests(e.rests)},children:"Show All Restaurantes"})]})]})},p=s(6042),v=s(9500),y=s(9550),w=function(e){var r=e.props,s=(0,o.s0)();return(0,b.jsx)("div",{className:"max-w-sm rounded overflow-hidden shadow-lg text-center",children:(0,b.jsxs)("div",{className:"px-6 py-4",children:[(0,b.jsx)("div",{className:"font-bold text-xl mb-2",children:r.name}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("span",{className:"w-100% font-semibold text-sm text-gray-700 mr-2",children:["Location: ",(0,b.jsx)("span",{className:"text-blue-500",children:r.city})]})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("span",{className:"font-semibold text-gray-700 text-sm mr-2",children:["Cuisine: ",(0,b.jsxs)("span",{className:"text-blue-500",children:[" ",r.cuisine," "]})]})}),(0,b.jsx)("h3",{className:"pt-1 ml-2 font-bold text-sm",children:"Last review"}),r.reviews[0]?(0,b.jsx)(y.Z,{props:r.reviews[r.reviews.length-1]}):(0,b.jsx)("p",{children:"There are no reviews"}),(0,b.jsx)("button",{onClick:function(){s("/allreviews",{state:{id:r._id}})},className:"text-gray-700 hover:bg-slate-200 font-bold py-2 px-4 rounded",children:"See all reviews"}),(0,b.jsx)("div",{className:"mt-2 mb-1",children:(0,b.jsx)("a",{href:r.url,target:"_blank",rel:"noreferrer",className:" hover:text-black",children:"To Restaurant Page"})})]})]})})},j=s(9085),N=s(3157),C=function(e){var r=(0,l.v9)((function(e){return e.auth})).user,s=(0,m.cI)({defaultValues:{reviewerName:r.user,restId:e.restId,review:""}}),t=s.register,n=s.handleSubmit,a=(0,l.I0)(),c=(0,o.s0)(),d=(0,l.v9)((function(e){return e.review})),u=d.isSuccess,x=d.isError;return(0,i.useEffect)((function(){x&&(j.Am.error("Failed to add the review, please try again"),a((0,N.mc)())),u&&(j.Am.success("Review added successfully"),a((0,N.mc)()))}),[u,x,c,a]),(0,b.jsx)("div",{className:"max-w-sm rounded overflow-hidden shadow-lg text-center",children:(0,b.jsx)("div",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"border-b -mx-8 px-8 pb-3",children:[(0,b.jsx)("div",{className:"flex items-center mt-1"}),(0,b.jsxs)("form",{className:"space-y-6",onSubmit:n((function(e){a((0,N.N_)(e))})),method:"POST",children:[(0,b.jsx)("div",{className:"font-bold max-w-lg text-xl mb-2",children:"Your review"}),(0,b.jsx)("textarea",(0,h.Z)({id:"review",rows:"4",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Your review..."},t("review"))),(0,b.jsx)("button",{type:"submit",className:"text-grey-700 hover:bg-slate-200 font-bold py-2 px-4 rounded text-center",children:"Submit"})]})]})})})},k=function(e){var r=e.props,s=(0,i.useState)(!1),t=(0,a.Z)(s,2),n=t[0],o=t[1];return(0,b.jsx)(p.J,{position:[r.latitude,r.longitude],children:(0,b.jsx)(v.G,{children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C,{restId:r._id}),(0,b.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:function(){o(!1)},children:"Back"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{props:r}),(0,b.jsx)("button",{onClick:function(){o(!0)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold  py-2 px-4 rounded mt-2 ",children:"Add a review"})]})})})},S=function(e){return(0,b.jsx)("div",{children:e.rests&&e.rests.map((function(e){return(0,b.jsx)(k,{props:e},e._id)}))})},B=[52.561928,-1.464854],M=function(){var e=(0,i.useState)([]),r=(0,a.Z)(e,2),s=r[0],h=r[1],m=(0,i.useState)([]),x=(0,a.Z)(m,2),f=x[0],p=x[1],v=(0,l.v9)((function(e){return e.auth})).user,y=(0,o.s0)();return(0,i.useEffect)((function(){console.log(v),v||y("/");var e=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.b)("/rests");case 2:return r=e.sent,e.next=5,h(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[f]),(0,b.jsxs)("div",{children:[(0,b.jsx)(g,{setFilteredRests:p,rests:s}),(0,b.jsx)("div",{className:"leaflet-container",children:(0,b.jsxs)(c.h,{center:B,zoom:4,scrollWheelZoom:!0,id:"mapid",children:[(0,b.jsx)(d.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s&&(0,b.jsx)(S,{rests:f})]})})]})}}}]);
//# sourceMappingURL=294.20086e3e.chunk.js.map